"use strict";(self.webpackChunkadmin_cra=self.webpackChunkadmin_cra||[]).push([[9539],{87432:(e,s,r)=>{r.d(s,{A:()=>l});var a=r(19645),n=r(17005),t=r(59017);const l=e=>{const{permission:s,...r}=e,{permission:l}=(0,n.d4)((e=>e.authenticationReducer));if(s){const e=s.split(".");return l&&l[e[0]]&&l[e[0]].includes(e[1])?(0,t.jsx)(a.K,{...r}):(0,t.jsx)(t.Fragment,{})}return(0,t.jsx)(a.K,{...r})}},417:(e,s,r)=>{r.d(s,{A:()=>g});var a=r(44875),n=r(71814),t=r(75404),l=r(92662),o=r(63871),i=r(61002),c=r(73818),d=r(95890),u=r(91530),m=r(77121),p=r(70727),h=r(59017);const g=e=>{const{typical:s,errors:r,register:g,getValues:x,handleSubmit:j,setValue:y,trigger:f,...v}=e;return(0,h.jsxs)(a.MJ,{variant:"floating",id:u.p[s].name,isInvalid:!0,children:[(0,h.jsxs)(n.M,{children:[u.p[s].icon?(0,h.jsx)(t.W,{pointerEvents:"none",children:(0,h.jsx)(l.I,{as:u.p[s].icon,color:"fg.muted",boxSize:"4"})}):(0,h.jsx)(h.Fragment,{}),(0,h.jsx)(o.p,{isInvalid:r.hasOwnProperty(u.p[s].name),errorBorderColor:"red.300",type:"password"!==u.p[s].name?"text":"password",...g(u.p[s].name,u.p[s].rules),placeholder:"",...v}),u.p[s].rules&&u.p[s].rules.hasOwnProperty("required")&&u.p[s].rules.required?(0,h.jsxs)(i.l,{children:[(0,m.t)(u.p[s].placeholder),"\xa0",(0,h.jsx)("span",{style:{color:"red"},children:"*"})]}):(0,h.jsx)(i.l,{children:(0,m.t)(u.p[s].placeholder)}),!r.hasOwnProperty(u.p[s].name)&&""!=x(u.p[s].name)&&(0,h.jsx)(t.t,{children:(0,h.jsx)(l.I,{as:p.GHp,color:"green.500",boxSize:"5"})})]}),r.hasOwnProperty(u.p[s].name)&&(0,h.jsx)(c.B,{pt:"1",children:(0,h.jsx)(d.E,{color:"tomato",fontSize:"10px",children:(0,h.jsx)("i",{children:(0,m.t)(`error.${r[u.p[s].name].type}`)})})})]})}},36866:(e,s,r)=>{r.d(s,{A:()=>m});var a=r(63812),n=r(75783),t=r(19645),l=r(12113),o=r(66685),i=r(70727),c=r(79590),d=r(12460),u=r(59017);const m=e=>{const{total:s=0}=e,[r,m]=(0,o.useState)(0),{params:p}=(0,d.lT)(),h=(0,c.Zp)(),g=(0,c.zy)(),{page:x=l.XB,size:j=l.md}=p;return(0,u.jsxs)(n.e,{spacing:"3",justifyContent:"space-center",width:{base:"full",md:"auto"},children:[(0,u.jsx)(t.K,{variant:"secondary","aria-label":"Before pagination",onClick:()=>{r>0&&m(r-1)},children:(0,u.jsx)(i.oe,{})}),Array.from(Array(Math.ceil(s/j)).keys()).splice(5*r,5).map((e=>(0,u.jsx)(a.$,{variant:e+1===parseInt(x)?"primary":"secondary",onClick:()=>{e+1>=5*(r+1)&&r+1<Math.ceil(Math.ceil(s/j)/5)&&m(r+1),(e=>{h(`${g.pathname}?${(0,d.VZ)({...p,page:e,size:j})}`)})(e+1)},children:e+1},e))),(0,u.jsx)(t.K,{variant:"secondary","aria-label":"Next pagination",onClick:()=>{r+1<Math.ceil(Math.ceil(s/j)/5)&&m(r+1)},children:(0,u.jsx)(i.oLC,{})})]})}},61726:(e,s,r)=>{r.d(s,{A:()=>R});var a=r(38755),n=r(89574),t=r(86217),l=r(66685),o=r(75100),i=r(38757),c=r(87088),d=r(88171),u=r(56697),m=r(53546),p=r(56166),h=r(21561),g=r(47685),x=r(25787),j=r(63429),y=r(59017);const f=function(e){let{data:s,columns:r}=e;const[a,n]=l.useState([]),f=(0,j.N4)({columns:r,data:s,getCoreRowModel:(0,t.HT)(),onSortingChange:n,getSortedRowModel:(0,t.h5)(),state:{sorting:a}});return(0,y.jsx)(o.K,{className:"custom-table",children:(0,y.jsxs)(i.X,{children:[(0,y.jsx)(c.d,{children:f.getHeaderGroups().map((e=>(0,y.jsx)(d.Tr,{children:e.headers.map((e=>{const s=e.column.columnDef.meta;return(0,y.jsxs)(u.Th,{onClick:e.column.getToggleSortingHandler(),isNumeric:null===s||void 0===s?void 0:s.isNumeric,className:"selected"===e.id?"checkbox-select":"",children:[(0,j.Kv)(e.column.columnDef.header,e.getContext()),(0,y.jsx)(m.B.span,{pl:"4",children:e.column.getIsSorted()?"desc"===e.column.getIsSorted()?(0,y.jsx)(g.k,{"aria-label":"sorted descending"}):(0,y.jsx)(x.D,{"aria-label":"sorted ascending"}):null})]},e.id)}))},e.id)))}),(0,y.jsx)(p.N,{children:f.getRowModel().rows.map((e=>(0,y.jsx)(d.Tr,{children:e.getVisibleCells().map((e=>{const s=e.column.columnDef.meta;return(0,y.jsx)(h.Td,{isNumeric:null===s||void 0===s?void 0:s.isNumeric,children:(0,j.Kv)(e.column.columnDef.cell,e.getContext())},e.id)}))},e.id)))})]})})};var v=r(83841),A=r(22700),E=r(39475),C=r(13716),b=r(34057),w=r(24786),S=r(54757),M=r(26604),O=r(60019),_=r(17005);const N=e=>{const[s,r]=l.useState([]),{data:a,columns:o,permissionGroup:i,onSelect:c}=e,{permission:d}=(0,_.d4)((e=>e.authenticationReducer)),u=(0,j.N4)({columns:o,data:a,getCoreRowModel:(0,t.HT)(),onSortingChange:r,getSortedRowModel:(0,t.h5)(),state:{sorting:s}}).getRowModel().rows;return(0,y.jsx)(v.n,{allowMultiple:!0,children:a.map(((e,s)=>{const r=u.find((s=>s.original===e)),a=r.getVisibleCells().find((e=>e.column.id==o.filter((e=>"selected"!==e.accessorKey))[0].accessorKey));return(0,y.jsxs)(A.A,{children:[(0,y.jsx)("h2",{children:(0,y.jsxs)(E.J,{children:["function"===typeof c&&d&&i&&d[i]&&Array.isArray(d[i])&&d[i].includes("update")?(0,y.jsx)(C.az,{as:"span",flex:"1",textAlign:"left",onClick:e=>e.stopPropagation(),children:(0,y.jsxs)(b.z,{spacing:"3",children:[(0,y.jsx)(n.S,{onChange:r=>{c({id:e.id?e.id:s.toString(),value:r.target.checked})}}),(0,j.Kv)(a.column.columnDef.cell,a.getContext())]})}):(0,j.Kv)(a.column.columnDef.cell,a.getContext()),(0,y.jsx)(w.Q,{})]})}),(0,y.jsx)(S.v,{pb:4,children:o.filter((e=>"selected"!==e.accessorKey)).map((e=>{const a=r.getVisibleCells().find((s=>s.column.id==e.accessorKey));return(0,y.jsxs)(l.Fragment,{children:[(0,y.jsxs)(M.s,{my:"5",children:[(0,y.jsx)(C.az,{flex:"1",children:e.header}),(0,y.jsx)(C.az,{flex:"1",children:(0,j.Kv)(a.column.columnDef.cell,a.getContext())})]}),(0,y.jsx)(O.c,{})]},`${s}_${e.accessorKey}`)}))})]},s)}))})},L=(0,t.FB)(),R=e=>{const s=(0,a.A)({base:!0,md:!1}),{data:r,columns:t,permissionGroup:l,onSelect:o}=e,{permission:i}=(0,_.d4)((e=>e.authenticationReducer));return s?(0,y.jsx)(N,{...e}):"function"===typeof o&&i&&l&&i[l]&&Array.isArray(i[l])&&i[l].includes("update")?(0,y.jsx)(f,{data:r,columns:[L.accessor("selected",{cell:e=>(0,y.jsx)(n.S,{onChange:s=>{o({id:e.row.original.id?e.row.original.id:e.row.id,value:s.target.checked})}}),header:""}),...t]}):(0,y.jsx)(f,{data:r,columns:t})}},99539:(e,s,r)=>{r.r(s),r.d(s,{EmployeePage:()=>U,default:()=>Q});var a=r(66685),n=r(73818),t=r(13716),l=r(17005),o=r(38044),i=r(12460),c=r(36866),d=r(34057),u=r(53767),m=r(95890),p=r(64982),h=r(86217),g=r(12113),x=r(87432),j=r(65863),y=r(51585),f=r(93389),v=r(58938);const A=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],E=e=>{try{e=(e=e.replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"_")).toLowerCase();let s=0;for(let r=0;r<Math.min(e.length,6);r++)s+=Math.pow(A.findIndex((s=>s===e.charAt(r))),e.length-r);return s}catch(s){return 0}};var C=r(59017);const b=(0,h.FB)(),w=e=>{const{t:s,location:r,activedLanguage:a,deleteEmployeeHandler:n}=e;return[b.accessor("name",{cell:e=>{var s,r;return(0,C.jsxs)(d.z,{spacing:"3",children:[(0,C.jsx)(u.e,{name:e.row.original.name,src:null===(s=e.row.original.avatar)||void 0===s?void 0:s.url,boxSize:"10"}),(0,C.jsxs)(t.az,{children:[(0,C.jsx)(m.E,{fontWeight:"medium",children:e.row.original.name}),(0,C.jsx)(m.E,{color:"fg.muted",children:e.row.original.role&&(0,v.G)(null===(r=e.row.original.role)||void 0===r?void 0:r.typeName)[a]})]})]})},header:s("table.employee.information")}),b.accessor("phone",{cell:e=>(0,C.jsxs)(t.az,{children:[(0,C.jsx)(m.E,{fontWeight:"medium",children:e.row.original.phone}),(0,C.jsx)(m.E,{color:"fg.muted",children:e.row.original.email})]}),header:s("table.employee.contact")}),b.accessor("status",{cell:e=>{var s;const r=(0,v.G)(null===(s=e.getValue())||void 0===s?void 0:s.typeName)[a];return(0,C.jsx)(p.E,{size:"sm",colorScheme:g.Tj[Math.floor(E(r)%g.Tj.length)],children:r})},header:s("table.status")}),b.accessor("id",{cell:e=>(0,C.jsxs)(d.z,{spacing:"1",children:[(0,C.jsx)(x.A,{icon:(0,C.jsx)(y.bZk,{}),variant:"tertiary",permission:"employee.view","aria-label":"View member",as:f.N_,to:(0,i.Gm)(`/dashboard/organisation/${e.getValue()}`,r)}),(0,C.jsx)(x.A,{icon:(0,C.jsx)(j.WXf,{}),variant:"tertiary",permission:"employee.update","aria-label":"Edit member",as:f.N_,to:(0,i.Gm)(`/dashboard/organisation/${e.getValue()}/edit`,r)}),(0,C.jsx)(x.A,{icon:(0,C.jsx)(j.IXo,{}),variant:"tertiary",permission:"employee.delete","aria-label":"Delete member",onClick:()=>n(e.getValue())})]}),header:s("table.action")})]};var S=r(79590),M=r(19898),O=r(77121),_=r(66710),N=r(61726);const L=e=>{const s=(0,l.wA)(),r=(0,S.zy)(),{list:n}=(0,l.d4)((e=>e.employeesReducer)),{activedLanguage:t}=(0,l.d4)((e=>e.languageReducer)),{params:c}=(0,i.lT)(),d=(0,a.useCallback)((e=>{s(o.o1.PUSH_SELECTED(e))}),[]),u=(0,a.useCallback)((e=>{s(M.o1.OPEN_MODAL({type:_.DELETE_CONFIRMATION_MODAL,data:{next:()=>{s(o.o1.DELETE_ASYNC({id:e,params:c})),s(M.o1.CLOSE_MODAL(_.DELETE_CONFIRMATION_MODAL))}}}))}),[]);return(0,a.useMemo)((()=>(0,C.jsx)(N.A,{permissionGroup:"employee",data:n||[],columns:w({t:O.t,location:r,activedLanguage:t,deleteEmployeeHandler:u}),onSelect:d})),[n,t])};var R=r(44875),T=r(2483),D=r(92376),z=r(54990),k=r(417),I=r(46708),F=r(71241);const P=e=>{const{isMulti:s,value:r,onChange:n}=e,{activedLanguage:t}=(0,l.d4)((e=>e.languageReducer)),{employeeRoles:o}=(0,l.d4)((e=>e.commonReducer)),{params:c}=(0,i.lT)(),d=(0,l.wA)(),u={role:null,...c};return(0,a.useEffect)((()=>{Array.isArray(o)&&o.length<1&&d(F.o1.FETCH_EMPLOYEE_ROLES())}),[]),(0,a.useEffect)((()=>{d(F.o1.FETCH_EMPLOYEE_ROLES())}),[t]),(0,a.useEffect)((()=>{n(o.filter((e=>Array.isArray(u.role)?u.role.includes(e.value):e.value===u.role)))}),[o]),(0,C.jsx)(I.Ae,{isClearable:!0,isMulti:s||!1,isFloating:!0,name:"role",placeholder:(0,O.t)("input.role.placeholder"),value:r,onChange:n,options:o})},K=e=>{const{value:s,onChange:r}=e,{activedLanguage:n}=(0,l.d4)((e=>e.languageReducer)),{employeeStatuses:t}=(0,l.d4)((e=>e.commonReducer)),{params:o}=(0,i.lT)(),c=(0,l.wA)(),d={status:null,...o};return(0,a.useEffect)((()=>{Array.isArray(t)&&t.length<1&&c(F.o1.FETCH_EMPLOYEE_STATUSES())}),[]),(0,a.useEffect)((()=>{c(F.o1.FETCH_EMPLOYEE_STATUSES())}),[n]),(0,a.useEffect)((()=>{r(t.filter((e=>Array.isArray(d.status)?d.status.includes(e.value):e.value===d.status)))}),[t]),(0,C.jsx)(I.Ae,{isClearable:!0,isRequired:!1,isFloating:!0,name:"status",placeholder:(0,O.t)("input.status.select"),value:s,onChange:r,options:t,errorMessage:""})};var B=r(53678),V=r(52511),H=r(26083),G=r(66320),$=r(38881),Y=r(89475),W=r(18764),q=r(1684);const X=e=>{const s=(0,a.useRef)(null),{permission:r,onChange:n}=e,{permission:t}=(0,l.d4)((e=>e.authenticationReducer)),o=()=>{s.current.click()},i=e=>{try{e.preventDefault();const s=e.target.files[0];if(s&&g.VV.includes(s.type))if(s.size>g.NN)Y.A.error((0,O.t)("error.filesize"));else{const e=new FileReader;e.onload=e=>{const s=new Uint8Array(e.target.result),r=q.LF(s,{type:"array"}),a=r.Sheets[r.SheetNames[0]],t=q.Wp.sheet_to_json(a,{header:1});n(t)},e.readAsArrayBuffer(s)}else Y.A.error((0,O.t)("error.filetype"));e.target.value=null}catch(s){Y.A.error((0,O.t)("message.error")),e.target.value=null}};if(r){const e=r.split(".");return t&&t[e[0]]&&t[e[0]].includes(e[1])?(0,C.jsxs)(a.Fragment,{children:[(0,C.jsx)(T.s6,{children:(0,C.jsx)("input",{type:"file",ref:s,onChange:i})}),(0,C.jsx)(G.p,{typical:"import",onClick:o})]}):(0,C.jsx)(C.Fragment,{})}return(0,C.jsxs)(a.Fragment,{children:[(0,C.jsx)(T.s6,{children:(0,C.jsx)("input",{type:"file",ref:s,onChange:i})}),(0,C.jsx)(G.p,{typical:"import",onClick:o})]})};var Z=r(35342);const J=e=>{const s=(0,S.Zp)(),r=(0,S.zy)(),t=(0,l.wA)(),[o,c]=(0,a.useState)(),[u,m]=(0,a.useState)(),{params:p}=(0,i.lT)(),{selected:h}=(0,l.d4)((e=>e.employeesReducer)),x={search:null,...p},j=(0,z.K)(D.mN),{activedLanguage:y}=(0,l.d4)((e=>e.languageReducer));(0,a.useEffect)((()=>{j.setValue("search",x.search)}),[]);const f=(0,a.useCallback)((()=>{t(M.o1.OPEN_MODAL({type:$.DOWNLOAD_CONFIRMATION_MODAL,data:{next:async()=>{try{await(0,W.PE)("/api/employee/download","employee.csv",y),Y.A.success((0,O.t)("message.success"))}catch(e){Y.A.error((0,O.t)("message.error"))}finally{t(M.o1.CLOSE_MODAL($.DOWNLOAD_CONFIRMATION_MODAL))}}}}))}),[]);return(0,C.jsx)("form",{onSubmit:null===j||void 0===j?void 0:j.handleSubmit((e=>{e.role=o?o.map((e=>e.value)):null,e.status=u?u.value:null;const a=(0,i.VZ)({...p,...e});s(`${r.pathname}?${a}`)})),children:(0,C.jsxs)(n.B,{spacing:5,children:[(0,C.jsxs)(n.B,{direction:{base:"column",md:"row"},justify:"space-between",children:[(0,C.jsx)(k.A,{...j,typical:"search"}),(0,C.jsx)(K,{value:u,onChange:e=>m(e)}),(0,C.jsx)(P,{isMulti:!0,value:o,onChange:e=>c(e)}),(0,C.jsx)(R.MJ,{children:(0,C.jsx)(T.s6,{children:"Checkmark"})})]}),(0,C.jsxs)(n.B,{direction:{base:"column",md:"row"},justify:"space-between",children:[(0,C.jsxs)(n.B,{direction:{base:"column",md:"row"},children:[(0,C.jsxs)(d.z,{children:[(0,C.jsx)(G.p,{typical:"add",permission:"employee.create",onClick:()=>{t(B.o1.OPEN_DRAWER({type:V.ADD_EMPLOYEE_DRAWER,size:"lg",data:{}}))}}),(0,C.jsx)(G.p,{typical:"download",permission:"employee.view",onClick:f})]}),(0,C.jsxs)(d.z,{children:[(0,C.jsx)(X,{permission:"employee.create",onChange:async e=>{const s=await(0,Z.qY)(e);s.status===g.sh.INCORRECT?Y.A.error(`${JSON.stringify(s.data)}`):Y.A.success((0,O.t)("message.success"))}}),(0,C.jsx)(G.p,{typical:"massChange",permission:"employee.update",isDisabled:!(Array.isArray(h)&&h.length>0),onClick:()=>{t(M.o1.OPEN_MODAL({type:H.MASS_CHANGE_EMPLOYEE_MODAL}))}})]})]}),(0,C.jsx)(d.z,{children:(0,C.jsx)(G.p,{type:"submit",permission:"employee.view",typical:"search"})})]})]})})},U=()=>{const e=(0,l.wA)(),{total:s}=(0,l.d4)((e=>e.employeesReducer)),{params:r,fullPath:d}=(0,i.lT)();return(0,a.useEffect)((()=>{e(o.o1.GET_LIST_ASYNC(r))}),[]),(0,a.useEffect)((()=>{e(o.o1.GET_LIST_ASYNC(r))}),[d]),(0,C.jsx)(n.B,{bg:"bg.surface",spacing:{base:"8",lg:"6"},boxShadow:{base:"none",md:"sm"},borderRadius:{base:"none",md:"lg"},style:{overflow:"visible"},width:{base:"full",md:"full",sm:"sm"},children:(0,C.jsxs)(n.B,{spacing:"5",children:[(0,C.jsx)(t.az,{px:{base:"4",md:"6"},pt:"5",children:(0,C.jsx)(J,{})}),(0,C.jsx)(t.az,{px:{base:"4",md:"6"},children:(0,C.jsx)(t.az,{overflowX:"scroll",children:(0,C.jsx)(L,{})})}),(0,C.jsx)(t.az,{px:{base:"4",md:"6"},pb:"5",children:(0,C.jsx)(n.B,{alignItems:"center",children:(0,C.jsx)(c.A,{total:s})})})]})})},Q=U}}]);
//# sourceMappingURL=9539.4d0d7ef1.chunk.js.map